import{f as P,Q as D,r as W,K as b,L as f,O as t,n as l,R as s,P as r,u as T,S as F,T as $,b as C,U as w,V as K,W as N}from"./vue-CpUfmXXb.js";import{h as B,i as X,j as R,V as q,k as E,l as O,n as c,o as I,p as M,q as j,r as A,s as k,t as L,v as z}from"./index-D_LdC8fx.js";import{V as Q}from"./VForm-BrgfEUmI.js";const G={key:0,class:"text-warning"},h=P({__name:"CategoryFormDialog",props:{guid:{},initialCategory:{}},emits:["submit"],setup(o,{emit:S}){const n=o,p=S,{t:g}=B(),v=X(),{isOpened:m}=R(n.guid),d=C(!1),U=[a=>!!a||g("dialogs.category.nameRequired")],i=W({name:"",savePath:""});async function V(){d.value&&(n.initialCategory?await v.editCategory(i,n.initialCategory.name===i.name?void 0:n.initialCategory.name):await v.createCategory(i),p("submit",i),y())}function y(){m.value=!1}return D(()=>{i.name=n.initialCategory?.name||"",i.savePath=n.initialCategory?.savePath||""}),(a,e)=>(f(),b(L,{modelValue:T(m),"onUpdate:modelValue":e[4]||(e[4]=u=>N(m)?m.value=u:null)},{default:t(()=>[l(q,null,{default:t(()=>[l(E,null,{default:t(()=>[s(r(a.$t(`dialogs.category.title.${o.initialCategory?"edit":"create"}`)),1)]),_:1}),l(O,null,{default:t(()=>[l(T(Q),{ref:"form",modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=u=>d.value=u),onSubmit:e[3]||(e[3]=$(()=>{},["prevent"])),onKeydown:F($(V,["prevent"]),["enter"])},{default:t(()=>[o.initialCategory?(f(),b(c,{key:0,"model-value":o.initialCategory.name,disabled:"",label:a.$t("dialogs.category.oldName")},null,8,["model-value","label"])):w("",!0),l(c,{modelValue:i.name,"onUpdate:modelValue":e[0]||(e[0]=u=>i.name=u),rules:U,autofocus:!o.initialCategory,label:a.$t("dialogs.category.name")},null,8,["modelValue","autofocus","label"]),l(c,{modelValue:i.savePath,"onUpdate:modelValue":e[1]||(e[1]=u=>i.savePath=u),autofocus:!!o.initialCategory,label:a.$t("dialogs.category.savePath")},null,8,["modelValue","autofocus","label"]),l(I,null,{default:t(()=>[o.initialCategory&&o.initialCategory.name!==i.name?(f(),K("div",G,[l(M,null,{default:t(()=>[...e[5]||(e[5]=[s("mdi-alert",-1)])]),_:1}),s(" "+r(a.$t("dialogs.category.warnEdit")),1)])):w("",!0)]),_:1})]),_:1},8,["modelValue","onKeydown"])]),_:1}),l(j,null,{default:t(()=>[l(A),l(k,{color:"error",onClick:y},{default:t(()=>[s(r(a.$t("common.cancel")),1)]),_:1}),l(k,{color:"accent",disabled:!d.value,onClick:V},{default:t(()=>[s(r(a.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),H={key:0,class:"text-warning"},x=P({__name:"TagFormDialog",props:{guid:{},initialTag:{}},emits:["submit"],setup(o,{emit:S}){const n=o,p=S,{isOpened:g}=R(n.guid),{t:v}=B(),m=z(),d=C(!1),U=C([a=>!!a||v("dialogs.tag.required"),a=>!n.initialTag||!!n.initialTag&&!a.includes(",")||v("dialogs.tag.comma")]),i=C("");async function V(){if(!d.value)return;let a;n.initialTag?(a=[i.value],await m.editTag(n.initialTag,i.value)):(a=i.value.split(","),await m.createTags(a)),p("submit",a),y()}function y(){g.value=!1}return D(()=>{i.value=n.initialTag||""}),(a,e)=>(f(),b(L,{modelValue:T(g),"onUpdate:modelValue":e[3]||(e[3]=u=>N(g)?g.value=u:null)},{default:t(()=>[l(q,null,{default:t(()=>[l(E,null,{default:t(()=>[s(r(a.$t(`dialogs.tag.title.${o.initialTag?"rename":"create"}`)),1)]),_:1}),l(O,null,{default:t(()=>[l(T(Q),{ref:"form",modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=u=>d.value=u),onSubmit:e[2]||(e[2]=$(()=>{},["prevent"])),onKeydown:F($(V,["prevent"]),["enter"])},{default:t(()=>[o.initialTag?(f(),b(c,{key:0,"model-value":o.initialTag,disabled:"",label:a.$t("dialogs.tag.oldName")},null,8,["model-value","label"])):w("",!0),l(c,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=u=>i.value=u),rules:U.value,autofocus:"",hint:a.$t("dialogs.tag.hint"),label:a.$t("dialogs.tag.name")},null,8,["modelValue","rules","hint","label"]),l(I,null,{default:t(()=>[o.initialTag&&o.initialTag!==i.value?(f(),K("div",H,[l(M,null,{default:t(()=>[...e[4]||(e[4]=[s("mdi-alert",-1)])]),_:1}),s(" "+r(a.$t("dialogs.tag.warnEdit")),1)])):w("",!0)]),_:1})]),_:1},8,["modelValue","onKeydown"])]),_:1}),l(j,null,{default:t(()=>[l(A),l(k,{color:"error",onClick:y},{default:t(()=>[s(r(a.$t("common.cancel")),1)]),_:1}),l(k,{color:"accent",disabled:!d.value,onClick:V},{default:t(()=>[s(r(a.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});export{x as _,h as a};
