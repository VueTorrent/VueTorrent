import{t as T,w as b,i as j,j as R,k as q,l as F,n as P}from"./index-EwodfUE9.js";import{e as M,x as p,u as N,s as A,k as H}from"./vue-CijE9XjK.js";const X=q?window:void 0;function U(t){var n;const e=p(t);return(n=e?.$el)!=null?n:e}function g(...t){const n=[],e=()=>{n.forEach(l=>l()),n.length=0},s=(l,o,r,f)=>(l.addEventListener(o,r,f),()=>l.removeEventListener(o,r,f)),i=M(()=>{const l=T(p(t[0])).filter(o=>o!=null);return l.every(o=>typeof o!="string")?l:void 0}),a=b(()=>{var l,o;return[(o=(l=i.value)==null?void 0:l.map(r=>U(r)))!=null?o:[X].filter(r=>r!=null),T(p(i.value?t[1]:t[0])),T(N(i.value?t[2]:t[1])),p(i.value?t[3]:t[2])]},([l,o,r,f])=>{if(e(),!l?.length||!o?.length||!r?.length)return;const D=j(f)?{...f}:f;n.push(...l.flatMap(_=>o.flatMap(E=>r.map(w=>s(_,E,w,D)))))},{flush:"post"}),c=()=>{a(),e()};return R(e),c}const B=500,V=10;function W(t,n,e){var s,i;const a=M(()=>U(t));let c,l,o,r=!1;function f(){c&&(clearTimeout(c),c=void 0),l=void 0,o=void 0,r=!1}function D(u){var d,v,m;const[h,y,L]=[o,l,r];if(f(),!e?.onMouseUp||!y||!h||(d=e?.modifiers)!=null&&d.self&&u.target!==a.value)return;(v=e?.modifiers)!=null&&v.prevent&&u.preventDefault(),(m=e?.modifiers)!=null&&m.stop&&u.stopPropagation();const S=u.x-y.x,O=u.y-y.y,I=Math.sqrt(S*S+O*O);e.onMouseUp(u.timeStamp-h,I,L)}function _(u){var d,v,m,h;(d=e?.modifiers)!=null&&d.self&&u.target!==a.value||(f(),(v=e?.modifiers)!=null&&v.prevent&&u.preventDefault(),(m=e?.modifiers)!=null&&m.stop&&u.stopPropagation(),l={x:u.x,y:u.y},o=u.timeStamp,c=setTimeout(()=>{r=!0,n(u)},(h=e?.delay)!=null?h:B))}function E(u){var d,v,m,h;if((d=e?.modifiers)!=null&&d.self&&u.target!==a.value||!l||e?.distanceThreshold===!1)return;(v=e?.modifiers)!=null&&v.prevent&&u.preventDefault(),(m=e?.modifiers)!=null&&m.stop&&u.stopPropagation();const y=u.x-l.x,L=u.y-l.y;Math.sqrt(y*y+L*L)>=((h=e?.distanceThreshold)!=null?h:V)&&f()}const w={capture:(s=e?.modifiers)==null?void 0:s.capture,once:(i=e?.modifiers)==null?void 0:i.once},C=[g(a,"pointerdown",_,w),g(a,"pointermove",E,w),g(a,["pointerup","pointerleave"],D,w)];return()=>C.forEach(u=>u())}const Z={mounted(t,n){typeof n.value=="function"?W(t,n.value,{modifiers:n.modifiers}):W(t,...n.value)}};function k(t){return typeof Window<"u"&&t instanceof Window?t.document.documentElement:typeof Document<"u"&&t instanceof Document?t.documentElement:t}function Y(t){const n=window.getComputedStyle(t);if(n.overflowX==="scroll"||n.overflowY==="scroll"||n.overflowX==="auto"&&t.clientWidth<t.scrollWidth||n.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const e=t.parentNode;return!e||e.tagName==="BODY"?!1:Y(e)}}function $(t){const n=t||window.event,e=n.target;return Y(e)?!1:n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)}const x=new WeakMap;function z(t,n=!1){const e=A(n);let s=null,i="";H(F(t),l=>{const o=k(p(l));if(o){const r=o;if(x.get(r)||x.set(r,r.style.overflow),r.style.overflow!=="hidden"&&(i=r.style.overflow),r.style.overflow==="hidden")return e.value=!0;if(e.value)return r.style.overflow="hidden"}},{immediate:!0});const a=()=>{const l=k(p(t));!l||e.value||(P&&(s=g(l,"touchmove",o=>{$(o)},{passive:!1})),l.style.overflow="hidden",e.value=!0)},c=()=>{const l=k(p(t));!l||!e.value||(P&&s?.(),l.style.overflow=i,x.delete(l),e.value=!1)};return R(c),M({get(){return e.value},set(l){l?a():c()}})}function G(){let t=!1;const n=A(!1);return(e,s)=>{if(n.value=s.value,t)return;t=!0;const i=z(e,s.value);H(n,a=>i.value=a)}}G();export{Z as v};
