import{U,s as q,a as S,j as E,W as H,C as K,w as _,X as A,Y as L,c as X,u as O,Z as Y,d as j,e as z,f as J,g as Q,V as W,M as Z,N as G,i as x,k as B,l as ee,o as ae,$ as te,a0 as N,a1 as oe}from"./index-BxupK9Nz.js";import{f as $,$ as le,I as n,R as c,J as t,L as o,x as se,S as v,m as l,N as V,O as f,u as g,F as M,X as F,a0 as ne,a1 as re,a2 as I,b as R,r as de,e as k,M as ue,Q as ie,P as me,T as ce,V as ye,Y as fe}from"./vue-D52l2THz.js";import{u as pe}from"./vuetify-CWphNKul.js";const he={class:"d-flex"},ve={key:2},ke={key:3},Ve=$({__name:"RightClickMenuEntry",props:{entryData:{}},setup(h){const a=h,m=U(L?"Meta":"Control",{initial:!1});function u(){a.entryData.action?.()}return(e,r)=>{const p=le("RightClickMenuEntry",!0);return e.entryData.hidden?c("",!0):(t(),n(q,{key:0,class:"px-3",disabled:e.entryData.disabled,onClick:u},{default:o(()=>[se("div",he,[e.entryData.disabled&&e.entryData.disabledIcon?(t(),n(S,{key:0,class:"mr-2"},{default:o(()=>[V(f(e.entryData.disabledIcon),1)]),_:1})):e.entryData.icon?(t(),n(S,{key:1,class:"mr-2"},{default:o(()=>[V(f(e.entryData.icon),1)]),_:1})):c("",!0),e.entryData.disabled&&e.entryData.disabledText?(t(),v("span",ve,f(e.entryData.disabledText),1)):(t(),v("span",ke,f(e.entryData.text),1)),l(E),!e.entryData.disabled&&e.entryData.children?(t(),n(S,{key:4},{default:o(()=>r[0]||(r[0]=[V(" mdi-chevron-right ")])),_:1,__:[0]})):c("",!0)]),e.entryData.children?(t(),n(H,{key:0,activator:"parent","open-on-hover":"","open-on-click":"","close-on-content-click":!g(m),"close-delay":"10","open-delay":"0",location:"right"},{default:o(()=>[l(K,null,{default:o(()=>[e.entryData.slots?.top?(t(),v(M,{key:0},[(t(!0),v(M,null,F(e.entryData.slots.top,(d,i)=>(t(),n(p,{key:i,"entry-data":d},null,8,["entry-data"]))),128)),l(_,{thickness:"3"})],64)):c("",!0),l(A,{items:e.entryData.children,"item-height":"48",renderless:""},{default:o(({item:d})=>[l(p,{"entry-data":d},null,8,["entry-data"])]),_:1},8,["items"]),e.entryData.slots?.bottom?(t(),v(M,{key:1},[l(_,{thickness:"3"}),(t(!0),v(M,null,F(e.entryData.slots.bottom,(d,i)=>(t(),n(p,{key:i,"entry-data":d},null,8,["entry-data"]))),128))],64)):c("",!0)]),_:1})]),_:1},8,["close-on-content-click"])):c("",!0)]),_:1},8,["disabled"]))}}}),ge=$({__name:"RightClickMenu",props:ne({menuData:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(h){const a=re(h,"modelValue"),m=U(L?"Meta":"Control",{initial:!1});return(u,e)=>a.value?(t(),n(H,{key:0,modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=r=>a.value=r),activator:"parent","close-on-content-click":!g(m),transition:"slide-y-transition","scroll-strategy":"none"},{default:o(()=>[l(K,null,{default:o(()=>[I(u.$slots,"top"),u.$slots.top?(t(),n(_,{key:0,thickness:"3"})):c("",!0),l(A,{items:u.menuData,"item-height":"48",renderless:""},{default:o(({item:r})=>[l(Ve,{"entry-data":r},null,8,["entry-data"])]),_:1},8,["items"]),u.$slots.bottom?(t(),n(_,{key:1,thickness:"3"})):c("",!0),I(u.$slots,"bottom")]),_:3})]),_:3},8,["modelValue","close-on-content-click"])):c("",!0)}}),Te=$({__name:"MoveTorrentDialog",props:{guid:{},hashes:{},mode:{}},setup(h){const a=h,{isOpened:m}=X(a.guid),{t:u}=O(),e=Y(),r=R(),p=R(),d=R(!1),i=de({newPath:""}),P=[s=>!!s||u("dialogs.moveTorrent.required")],T=k(()=>a.hashes.map(e.getTorrentByHash)),C=k(()=>{switch(a.mode){case"dl":return T.value[0]?.download_path;case"save":default:return T.value[0]?.savePath}});async function b(){await r.value?.validate(),d.value&&(await e.toggleAutoTmm(a.hashes,!1),await e.moveTorrents(a.mode,a.hashes,i.newPath),p.value?.saveValueToHistory(),w())}function w(){m.value=!1}return ue(()=>{i.newPath=C.value||""}),(s,y)=>(t(),n(ee,{modelValue:g(m),"onUpdate:modelValue":y[3]||(y[3]=D=>ce(m)?m.value=D:null)},{default:o(()=>[l(j,null,{default:o(()=>[l(z,null,{default:o(()=>[V(f(s.$t(`dialogs.moveTorrent.${s.mode}.title`)),1)]),_:1}),l(J,null,{default:o(()=>[l(g(Q),{ref_key:"form",ref:r,modelValue:d.value,"onUpdate:modelValue":y[1]||(y[1]=D=>d.value=D),onSubmit:y[2]||(y[2]=ie(()=>{},["prevent"]))},{default:o(()=>[C.value?(t(),n(W,{key:0,"model-value":C.value,disabled:"",label:s.$t("dialogs.moveTorrent.oldPath")},null,8,["model-value","label"])):c("",!0),l(Z,{ref_key:"field",ref:p,modelValue:i.newPath,"onUpdate:modelValue":y[0]||(y[0]=D=>i.newPath=D),"history-key":g(G).TORRENT_PATH,rules:P,autofocus:"",label:s.$t("dialogs.moveTorrent.newPath"),onKeydown:me(b,["enter"])},null,8,["modelValue","history-key","label"])]),_:1},8,["modelValue"])]),_:1}),l(x,null,{default:o(()=>[l(E),l(B,{color:"error",onClick:w},{default:o(()=>[V(f(s.$t("common.cancel")),1)]),_:1}),l(B,{color:"accent",disabled:!d.value,onClick:b},{default:o(()=>[V(f(s.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),we=$({__name:"ColoredChip",props:{defaultColor:{},disabled:{type:Boolean,default:!1},disabledValue:{},value:{}},setup(h){const a=h,{t:m}=O(),{current:u}=pe(),e=ae(),{enableHashColors:r,hideColoredChip:p}=ye(e);function d(s){return u.value.colors[s]??s}function i(s){return P.value?s.darken(30):s}const P=k(()=>e.theme.mode===te.DARK&&e.theme.dark==="dark-oled"),T=k(()=>a.disabled||!r.value?a.defaultColor:N(a.value,i)),C=k(()=>a.disabled||!r.value?d(a.defaultColor):N(a.value,i)),b=k(()=>a.disabled?a.disabledValue||a.value||m("common.none"):a.value),w=k(()=>!p.value);return(s,y)=>w.value?(t(),n(oe,{key:0,color:T.value,variant:"flat"},{default:o(()=>[V(f(b.value),1)]),_:1},8,["color"])):(t(),v("div",{key:1,class:"text-no-wrap",style:fe(`color: ${C.value}`)},f(b.value),5))}});export{ge as _,Te as a,we as b};
