import{f as R,Q as K,K as b,L as P,O as e,n as a,R as u,P as V,u as y,S as D,T as k,U as p,V as H,W as B,b as w,r as z}from"./vue-DmdtsAaC.js";import{h as O,i as G,j as q,V as A,k as I,l as M,n as $,_ as F,H as N,o as T,p as J,q as j,r as L,s as Q,t as h,v as W,w as Y}from"./index-XNwk2z4u.js";import{V as X}from"./VForm-Cg8YP1AM.js";const Z={key:0,class:"text-warning"},la=R({__name:"CategoryFormDialog",props:{guid:{},initialCategory:{}},emits:["submit"],setup(n,{emit:E}){const i=n,S=E,{t:g}=O(),C=G(),{isOpened:v}=q(i.guid),f=w(!1),U=[d=>!!d||g("dialogs.category.nameRequired")],m=w(),c=w(),l=z({name:"",savePath:"",downloadPathEnabled:!1,downloadPath:""});async function o(){f.value&&(c.value?.saveValueToHistory(),m.value?.saveValueToHistory(),i.initialCategory?await C.editCategory(l,i.initialCategory.name===l.name?void 0:i.initialCategory.name):await C.createCategory(l),S("submit",l),s())}function s(){v.value=!1}return K(()=>{l.name=i.initialCategory?.name||"",l.savePath=i.initialCategory?.savePath||"",l.downloadPathEnabled=i.initialCategory?.downloadPathEnabled||!1,l.downloadPath=i.initialCategory?.downloadPath||""}),(d,t)=>(b(),P(W,{modelValue:y(v),"onUpdate:modelValue":t[6]||(t[6]=r=>B(v)?v.value=r:null)},{default:e(()=>[a(A,null,{default:e(()=>[a(I,null,{default:e(()=>[u(V(d.$t(`dialogs.category.title.${n.initialCategory?"edit":"create"}`)),1)]),_:1}),a(M,null,{default:e(()=>[a(y(X),{ref:"form",modelValue:f.value,"onUpdate:modelValue":t[4]||(t[4]=r=>f.value=r),onSubmit:t[5]||(t[5]=k(()=>{},["prevent"])),onKeydown:D(k(o,["prevent"]),["enter"])},{default:e(()=>[n.initialCategory?(b(),P($,{key:0,"model-value":n.initialCategory.name,disabled:"",label:d.$t("dialogs.category.oldName")},null,8,["model-value","label"])):p("",!0),a($,{modelValue:l.name,"onUpdate:modelValue":t[0]||(t[0]=r=>l.name=r),rules:U,autofocus:!n.initialCategory,label:d.$t("dialogs.category.name")},null,8,["modelValue","autofocus","label"]),a(F,{ref_key:"savePathField",ref:c,modelValue:l.savePath,"onUpdate:modelValue":t[1]||(t[1]=r=>l.savePath=r),"history-key":y(N).TORRENT_PATH,title:y(g)("dialogs.category.savePath"),"hide-details":""},{prepend:e(()=>[a(T,{color:"accent"},{default:e(()=>[...t[7]||(t[7]=[u("mdi-content-save",-1)])]),_:1})]),_:1},8,["modelValue","history-key","title"]),a(J,{modelValue:l.downloadPathEnabled,"onUpdate:modelValue":t[2]||(t[2]=r=>l.downloadPathEnabled=r),"hide-details":"",density:"compact",label:y(g)("dialogs.category.downloadPathEnabled")},null,8,["modelValue","label"]),a(F,{ref_key:"downloadPathField",ref:m,modelValue:l.downloadPath,"onUpdate:modelValue":t[3]||(t[3]=r=>l.downloadPath=r),"history-key":y(N).TORRENT_PATH,title:y(g)("dialogs.category.downloadPath"),disabled:!l.downloadPathEnabled,"hide-details":""},{prepend:e(()=>[a(T,{color:"accent"},{default:e(()=>[...t[8]||(t[8]=[u("mdi-tray-arrow-down",-1)])]),_:1})]),_:1},8,["modelValue","history-key","title","disabled"]),a(j,null,{default:e(()=>[n.initialCategory&&n.initialCategory.name!==l.name?(b(),H("div",Z,[a(T,null,{default:e(()=>[...t[9]||(t[9]=[u("mdi-alert",-1)])]),_:1}),u(" "+V(d.$t("dialogs.category.warnEdit")),1)])):p("",!0)]),_:1})]),_:1},8,["modelValue","onKeydown"])]),_:1}),a(L,null,{default:e(()=>[a(Q),a(h,{color:"error",onClick:s},{default:e(()=>[u(V(d.$t("common.cancel")),1)]),_:1}),a(h,{color:"accent",disabled:!f.value,onClick:o},{default:e(()=>[u(V(d.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),x={key:0,class:"text-warning"},ta=R({__name:"TagFormDialog",props:{guid:{},initialTag:{}},emits:["submit"],setup(n,{emit:E}){const i=n,S=E,{isOpened:g}=q(i.guid),{t:C}=O(),v=Y(),f=w(!1),U=w([o=>!!o||C("dialogs.tag.required"),o=>!i.initialTag||!!i.initialTag&&!o.includes(",")||C("dialogs.tag.comma")]),m=w("");async function c(){if(!f.value)return;let o;i.initialTag?(o=[m.value],await v.editTag(i.initialTag,m.value)):(o=m.value.split(","),await v.createTags(o)),S("submit",o),l()}function l(){g.value=!1}return K(()=>{m.value=i.initialTag||""}),(o,s)=>(b(),P(W,{modelValue:y(g),"onUpdate:modelValue":s[3]||(s[3]=d=>B(g)?g.value=d:null)},{default:e(()=>[a(A,null,{default:e(()=>[a(I,null,{default:e(()=>[u(V(o.$t(`dialogs.tag.title.${n.initialTag?"rename":"create"}`)),1)]),_:1}),a(M,null,{default:e(()=>[a(y(X),{ref:"form",modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=d=>f.value=d),onSubmit:s[2]||(s[2]=k(()=>{},["prevent"])),onKeydown:D(k(c,["prevent"]),["enter"])},{default:e(()=>[n.initialTag?(b(),P($,{key:0,"model-value":n.initialTag,disabled:"",label:o.$t("dialogs.tag.oldName")},null,8,["model-value","label"])):p("",!0),a($,{modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=d=>m.value=d),rules:U.value,autofocus:"",hint:o.$t("dialogs.tag.hint"),label:o.$t("dialogs.tag.name")},null,8,["modelValue","rules","hint","label"]),a(j,null,{default:e(()=>[n.initialTag&&n.initialTag!==m.value?(b(),H("div",x,[a(T,null,{default:e(()=>[...s[4]||(s[4]=[u("mdi-alert",-1)])]),_:1}),u(" "+V(o.$t("dialogs.tag.warnEdit")),1)])):p("",!0)]),_:1})]),_:1},8,["modelValue","onKeydown"])]),_:1}),a(L,null,{default:e(()=>[a(Q),a(h,{color:"error",onClick:l},{default:e(()=>[u(V(o.$t("common.cancel")),1)]),_:1}),a(h,{color:"accent",disabled:!f.value,onClick:c},{default:e(()=>[u(V(o.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});export{ta as _,la as a};
