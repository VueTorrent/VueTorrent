import{H as O,a as B,z as H,ai as U,aj as A,Q as E,K as $,ak as I,al as q,q as z,o as L,ag as Q,r as j,s as J,v as W,V as X,am as Z,an as G,y as Y,A as x,B as _,e as ee,ao as te,ap as K,aq as ae}from"./index-C2cbxVRi.js";import{f as P,a4 as le,J as s,V as y,K as a,M as l,y as oe,W as k,n as o,S as C,Q as h,u as T,F as M,$ as N,a5 as ne,a6 as se,a2 as F,b as R,r as re,e as V,R as de,U as ue,T as ie,X as ce,Z as me,N as ye}from"./vue-BP8Ys_mB.js";import{V as fe}from"./VForm-Biwxgvx2.js";import{b as he}from"./vuetify-B343E58S.js";const ve={class:"d-flex"},ke={key:2},Ve={key:3},Ce=P({__name:"RightClickMenuEntry",props:{entryData:{}},setup(e){const t=e,c=A(q?"Meta":"Control",{initial:!1});function m(){t.entryData.action?.()}return(u,r)=>{const v=le("RightClickMenuEntry",!0);return e.entryData.hidden?y("",!0):(a(),s(O,{key:0,class:"px-3",disabled:e.entryData.disabled,onClick:m},{default:l(()=>[oe("div",ve,[e.entryData.disabled&&e.entryData.disabledIcon?(a(),s(B,{key:0,class:"mr-2"},{default:l(()=>[C(h(e.entryData.disabledIcon),1)]),_:1})):e.entryData.icon?(a(),s(B,{key:1,class:"mr-2"},{default:l(()=>[C(h(e.entryData.icon),1)]),_:1})):y("",!0),e.entryData.disabled&&e.entryData.disabledText?(a(),k("span",ke,h(e.entryData.disabledText),1)):(a(),k("span",Ve,h(e.entryData.text),1)),o(H),!e.entryData.disabled&&e.entryData.children?(a(),s(B,{key:4},{default:l(()=>[...r[0]||(r[0]=[C(" mdi-chevron-right ",-1)])]),_:1})):y("",!0)]),e.entryData.children?(a(),s(U,{key:0,activator:"parent","open-on-hover":"","open-on-click":"","close-on-content-click":!T(c),"close-delay":"10","open-delay":"0",location:"right"},{default:l(()=>[o(E,null,{default:l(()=>[e.entryData.slots?.top?(a(),k(M,{key:0},[(a(!0),k(M,null,N(e.entryData.slots.top,(d,i)=>(a(),s(v,{key:i,"entry-data":d},null,8,["entry-data"]))),128)),o($,{thickness:"3"})],64)):y("",!0),o(I,{items:e.entryData.children,"item-height":"48",renderless:""},{default:l(({item:d})=>[o(v,{"entry-data":d},null,8,["entry-data"])]),_:1},8,["items"]),e.entryData.slots?.bottom?(a(),k(M,{key:1},[o($,{thickness:"3"}),(a(!0),k(M,null,N(e.entryData.slots.bottom,(d,i)=>(a(),s(v,{key:i,"entry-data":d},null,8,["entry-data"]))),128))],64)):y("",!0)]),_:1})]),_:1},8,["close-on-content-click"])):y("",!0)]),_:1},8,["disabled"]))}}}),pe=P({__name:"RightClickMenu",props:ne({menuData:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=se(e,"modelValue"),c=A(q?"Meta":"Control",{initial:!1});return(m,u)=>t.value?(a(),s(U,{key:0,modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=r=>t.value=r),activator:"parent","close-on-content-click":!T(c),transition:"slide-y-transition",class:"text-noselect","scroll-strategy":"none"},{default:l(()=>[o(E,null,{default:l(()=>[F(m.$slots,"top"),m.$slots.top?(a(),s($,{key:0,thickness:"3"})):y("",!0),o(I,{items:e.menuData,"item-height":"48",renderless:""},{default:l(({item:r})=>[o(Ce,{"entry-data":r},null,8,["entry-data"])]),_:1},8,["items"]),m.$slots.bottom?(a(),s($,{key:1,thickness:"3"})):y("",!0),F(m.$slots,"bottom")]),_:3})]),_:3},8,["modelValue","close-on-content-click"])):y("",!0)}}),we=P({__name:"MoveTorrentDialog",props:{guid:{},hashes:{},mode:{}},setup(e){const t=e,{isOpened:c}=z(t.guid),{t:m}=L(),u=Q(),r=R(),v=R(),d=R(!1),i=re({newPath:""}),S=[n=>!!n||m("dialogs.moveTorrent.required")],p=V(()=>t.hashes.map(u.getTorrentByHash)),b=V(()=>{switch(t.mode){case"dl":return p.value[0]?.download_path;case"save":default:return p.value[0]?.savePath}});async function D(){await r.value?.validate(),d.value&&(await u.toggleAutoTmm(t.hashes,!1),await u.moveTorrents(t.mode,t.hashes,i.newPath),v.value?.saveValueToHistory(),w())}function w(){c.value=!1}return de(()=>{i.newPath=b.value||""}),(n,f)=>(a(),s(_,{modelValue:T(c),"onUpdate:modelValue":f[3]||(f[3]=g=>ce(c)?c.value=g:null)},{default:l(()=>[o(j,null,{default:l(()=>[o(J,null,{default:l(()=>[C(h(n.$t(`dialogs.moveTorrent.${e.mode}.title`)),1)]),_:1}),o(W,null,{default:l(()=>[o(T(fe),{ref_key:"form",ref:r,modelValue:d.value,"onUpdate:modelValue":f[1]||(f[1]=g=>d.value=g),onSubmit:f[2]||(f[2]=ue(()=>{},["prevent"]))},{default:l(()=>[b.value?(a(),s(X,{key:0,"model-value":b.value,disabled:"",label:n.$t("dialogs.moveTorrent.oldPath")},null,8,["model-value","label"])):y("",!0),o(Z,{ref_key:"field",ref:v,modelValue:i.newPath,"onUpdate:modelValue":f[0]||(f[0]=g=>i.newPath=g),"history-key":T(G).TORRENT_PATH,rules:S,autofocus:"",label:n.$t("dialogs.moveTorrent.newPath"),onKeydown:ie(D,["enter"])},null,8,["modelValue","history-key","label"])]),_:1},8,["modelValue"])]),_:1}),o(Y,null,{default:l(()=>[o(H),o(x,{color:"error",onClick:w},{default:l(()=>[C(h(n.$t("common.cancel")),1)]),_:1}),o(x,{color:"accent",disabled:!d.value,onClick:D},{default:l(()=>[C(h(n.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Me=P({__name:"ColoredChip",props:{defaultColor:{},disabled:{type:Boolean,default:!1},disabledValue:{},value:{}},setup(e){const t=e,{t:c}=L(),{current:m}=he(),u=ee(),{enableHashColors:r,hideColoredChip:v}=me(u);function d(n){return m.value.colors[n]??n}function i(n){return S.value?n.darken(30):n}const S=V(()=>u.theme.mode===te.DARK&&u.theme.dark==="dark-oled"),p=V(()=>t.disabled||!r.value?t.defaultColor:K(t.value,i)),b=V(()=>t.disabled||!r.value?d(t.defaultColor):K(t.value,i)),D=V(()=>t.disabled?t.disabledValue||t.value||c("common.none"):t.value),w=V(()=>!v.value);return(n,f)=>w.value?(a(),s(ae,{key:0,color:p.value,variant:"flat"},{default:l(()=>[C(h(D.value),1)]),_:1},8,["color"])):(a(),k("div",{key:1,class:"text-no-wrap",style:ye(`color: ${b.value}`)},h(D.value),5))}});export{pe as _,we as a,Me as b};
