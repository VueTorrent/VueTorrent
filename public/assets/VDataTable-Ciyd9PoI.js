import{p as V,j,E as Ve,F as ce,g as G,h as re,u as W,q as me,I as E,G as gt,e as C,H as vt,w as Y,J as mt,x as Fe,K as le,L as Z,D as ht,d as he,M as ye,N as fe,C as ge,O as xe,c as yt,f as bt,m as pt,Q as ee,k as xt}from"./vuetify-Cnll-KcT.js";import{e as I,k as be,d as q,p as z,y as b,n as x,v as N,q as J,b as M,w as St,c as Pt,s as wt,t as F,F as K,J as Ce,x as kt,R as Se,m as te,T as ae,P as It,B as Dt}from"./vue-BlUxyxf-.js";import{V as Pe}from"./VPagination-DBzx0JOV.js";import{I as Be,bo as Tt,S as Vt,bp as Ft,bq as Ct,ag as oe,J as ne,x as we,aH as Bt,A as Oe,bk as Ot,a as _t,aL as Et,aN as Nt,K as At}from"./index-BGUUvkio.js";const Rt=V({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),_e=Symbol.for("vuetify:data-table-pagination");function Ht(e){const t=j(e,"page",void 0,l=>Number(l??1)),a=j(e,"itemsPerPage",void 0,l=>Number(l??10));return{page:t,itemsPerPage:a}}function $t(e){const{page:t,itemsPerPage:a,itemsLength:l}=e,n=I(()=>a.value===-1?0:a.value*(t.value-1)),r=I(()=>a.value===-1?l.value:Math.min(l.value,n.value+a.value)),o=I(()=>a.value===-1||l.value===0?1:Math.ceil(l.value/a.value));be([t,o],()=>{t.value>o.value&&(t.value=o.value)});function i(d){a.value=d,t.value=1}function s(){t.value=ce(t.value+1,1,o.value)}function u(){t.value=ce(t.value-1,1,o.value)}function f(d){t.value=ce(d,1,o.value)}const m={page:t,itemsPerPage:a,startIndex:n,stopIndex:r,pageCount:o,itemsLength:l,nextPage:s,prevPage:u,setPage:f,setItemsPerPage:i};return z(_e,m),m}function Gt(){const e=q(_e);if(!e)throw new Error("Missing pagination!");return e}function Lt(e){const t=Ve("usePaginatedItems"),{items:a,startIndex:l,stopIndex:n,itemsPerPage:r}=e,o=I(()=>r.value<=0?a.value:a.value.slice(l.value,n.value));return be(o,i=>{t.emit("update:currentItems",i)},{immediate:!0}),{paginatedItems:o}}const Ee=V({color:String,prevIcon:{type:E,default:"$prev"},nextIcon:{type:E,default:"$next"},firstIcon:{type:E,default:"$first"},lastIcon:{type:E,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),ke=G()({name:"VDataTableFooter",props:Ee(),setup(e,t){let{slots:a}=t;const{t:l}=re(),{page:n,pageCount:r,startIndex:o,stopIndex:i,itemsLength:s,itemsPerPage:u,setItemsPerPage:f}=Gt(),m=I(()=>e.itemsPerPageOptions.map(d=>typeof d=="number"?{value:d,title:d===-1?l("$vuetify.dataFooter.itemsPerPageAll"):String(d)}:{...d,title:isNaN(Number(d.title))?l(d.title):d.title}));return W(()=>{const d=Pe.filterProps(e);return b("div",{class:"v-data-table-footer"},[a.prepend?.(),b("div",{class:"v-data-table-footer__items-per-page"},[b("span",null,[l(e.itemsPerPageText)]),x(Be,{items:m.value,itemColor:e.color,modelValue:u.value,"onUpdate:modelValue":v=>f(Number(v)),density:"compact",variant:"outlined","aria-label":l(e.itemsPerPageText),hideDetails:!0},null)]),b("div",{class:"v-data-table-footer__info"},[b("div",null,[l(e.pageText,s.value?o.value+1:0,i.value,s.value)])]),b("div",{class:"v-data-table-footer__pagination"},[x(Pe,N({modelValue:n.value,"onUpdate:modelValue":v=>n.value=v,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:r.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},me(d,["color"])),null)])])}),{}}}),Q=gt({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,indent:[Number,String],empty:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:a}=t;const l=e.tag??"td",n=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return x(l,{class:J(["v-data-table__td",{"v-data-table-column--fixed":n==="start","v-data-table-column--fixed-end":n==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap,"v-data-table-column--empty":e.empty},`v-data-table-column--align-${e.align}`]),style:{height:C(e.height),width:C(e.width),maxWidth:C(e.maxWidth),left:n==="start"?C(e.fixedOffset||null):void 0,right:n==="end"?C(e.fixedEndOffset||null):void 0,paddingInlineStart:e.indent?C(e.indent):void 0}},{default:()=>[a.default?.()]})}),Mt=V({headers:Array},"DataTable-header"),Ne=Symbol.for("vuetify:data-table-headers"),Ae={title:"",sortable:!1},jt={...Ae,width:48};function Kt(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(a=>({element:a,priority:0}));return{enqueue:(a,l)=>{let n=!1;for(let r=0;r<t.length;r++)if(t[r].priority>l){t.splice(r,0,{element:a,priority:l}),n=!0;break}n||t.push({element:a,priority:l})},size:()=>t.length,count:()=>{let a=0;if(!t.length)return 0;const l=Math.floor(t[0].priority);for(let n=0;n<t.length;n++)Math.floor(t[n].priority)===l&&(a+=1);return a},dequeue:()=>t.shift()}}function ve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const a of e.children)ve(a,t);return t}function Re(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const a of e)a.key&&t.add(a.key),a.children&&Re(a.children,t);return t}function Wt(e){if(e.key){if(e.key==="data-table-group")return Ae;if(["data-table-expand","data-table-select"].includes(e.key))return jt}}function pe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(a=>pe(a,t+1))):t}function qt(e){let t=!1;function a(r,o){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(r)if(i!=="none"&&(r.fixed=i),r.fixed===!0&&(r.fixed="start"),r.fixed===o)if(r.children)if(o==="start")for(let s=r.children.length-1;s>=0;s--)a(r.children[s],o,o);else for(let s=0;s<r.children.length;s++)a(r.children[s],o,o);else!t&&o==="start"?r.lastFixed=!0:!t&&o==="end"?r.firstFixedEnd=!0:isNaN(Number(r.width))?vt(`Multiple fixed columns should have a static width (key: ${r.key})`):r.minWidth=Math.max(Number(r.width)||0,Number(r.minWidth)||0),t=!0;else if(r.children)if(o==="start")for(let s=r.children.length-1;s>=0;s--)a(r.children[s],o);else for(let s=0;s<r.children.length;s++)a(r.children[s],o);else t=!1}for(let r=e.length-1;r>=0;r--)a(e[r],"start");for(let r=0;r<e.length;r++)a(e[r],"end");let l=0;for(let r=0;r<e.length;r++)l=He(e[r],l);let n=0;for(let r=e.length-1;r>=0;r--)n=$e(e[r],n)}function He(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const a of e.children)t=He(a,t)}else e.fixed&&e.fixed!=="end"&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function $e(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const a of e.children)t=$e(a,t)}else e.fixed==="end"&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function zt(e,t){const a=[];let l=0;const n=Kt(e);for(;n.size()>0;){let o=n.count();const i=[];let s=1;for(;o>0;){const{element:u,priority:f}=n.dequeue(),m=t-l-pe(u);if(i.push({...u,rowspan:m??1,colspan:u.children?ve(u).length:1}),u.children)for(const d of u.children){const v=f%1+s/Math.pow(10,l+2);n.enqueue(d,l+m+v)}s+=1,o-=1}l+=1,a.push(i)}return{columns:e.map(o=>ve(o)).flat(),headers:a}}function Ge(e){const t=[];for(const a of e){const l={...Wt(a),...a},n=l.key??(typeof l.value=="string"?l.value:null),r=l.value??n??null,o={...l,key:n,value:r,sortable:l.sortable??(l.key!=null||!!l.sort),children:l.children?Ge(l.children):void 0};t.push(o)}return t}function Ut(e,t){const a=M([]),l=M([]),n=M({}),r=M({}),o=M({});St(()=>{const u=(e.headers||Object.keys(e.items[0]??{}).map(g=>({key:g,title:Pt(g)}))).slice(),f=Re(u);t?.groupBy?.value.length&&!f.has("data-table-group")&&u.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!f.has("data-table-select")&&u.unshift({key:"data-table-select"}),t?.showExpand?.value&&!f.has("data-table-expand")&&u.push({key:"data-table-expand"});const m=Ge(u);qt(m);const d=Math.max(...m.map(g=>pe(g)))+1,v=zt(m,d);a.value=v.headers,l.value=v.columns;const p=v.headers.flat(1);for(const g of p)g.key&&(g.sortable&&(g.sort&&(n.value[g.key]=g.sort),g.sortRaw&&(r.value[g.key]=g.sortRaw)),g.filter&&(o.value[g.key]=g.filter))});const i={headers:a,columns:l,sortFunctions:n,sortRawFunctions:r,filterFunctions:o};return z(Ne,i),i}function se(){const e=q(Ne);if(!e)throw new Error("Missing headers!");return e}const Jt={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:a}=e;return new Set(a?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},Le={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:a,selected:l}=e;for(const n of t)a?l.add(n.value):l.delete(n.value);return l},selectAll:e=>{let{value:t,currentPage:a,selected:l}=e;return Le.select({items:a,value:t,selected:l})}},Qt={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:a,selected:l}=e;for(const n of t)a?l.add(n.value):l.delete(n.value);return l},selectAll:e=>{let{value:t,allItems:a}=e;return new Set(t?a.map(l=>l.value):[])}},Xt=V({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:Function},"DataTable-select"),Me=Symbol.for("vuetify:data-table-selection");function Yt(e,t){let{allItems:a,currentPage:l}=t;const n=j(e,"modelValue",e.modelValue,y=>{const S=e.valueComparator;return S?new Set(Y(y).map(T=>a.value.find(P=>S(T,P.value))?.value??T)):new Set(Y(y).map(T=>mt(T)?a.value.find(P=>T===P.value)?.value??T:a.value.find(P=>Fe(T,P.value))?.value??T))},y=>[...y.values()]),r=I(()=>a.value.filter(y=>y.selectable)),o=I(()=>l.value.filter(y=>y.selectable)),i=I(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return Jt;case"all":return Qt;default:return Le}}),s=wt(null);function u(y){return Y(y).every(S=>n.value.has(S.value))}function f(y){return Y(y).some(S=>n.value.has(S.value))}function m(y,S){const T=i.value.select({items:y,value:S,selected:new Set(n.value)});n.value=T}function d(y,S,T){const P=[];if(S=S??l.value.findIndex(B=>B.value===y.value),e.selectStrategy!=="single"&&T?.shiftKey&&s.value!==null){const[B,$]=[s.value,S].sort((A,w)=>A-w);P.push(...l.value.slice(B,$+1).filter(A=>A.selectable))}else P.push(y),s.value=S;m(P,!u([y]))}function v(y){const S=i.value.selectAll({value:y,allItems:r.value,currentPage:o.value,selected:new Set(n.value)});n.value=S}const p=I(()=>n.value.size>0),g=I(()=>{const y=i.value.allSelected({allItems:r.value,currentPage:o.value});return!!y.length&&u(y)}),c=F(()=>i.value.showSelectAll),D={toggleSelect:d,select:m,selectAll:v,isSelected:u,isSomeSelected:f,someSelected:p,allSelected:g,showSelectAll:c,lastSelectedIndex:s,selectStrategy:i};return z(Me,D),D}function ue(){const e=q(Me);if(!e)throw new Error("Missing selection!");return e}const Zt=V({initialSortOrder:{type:String,default:"asc",validator:e=>!e||["asc","desc"].includes(e)},sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:{type:[Boolean,Object],default:!1},mustSort:Boolean},"DataTable-sort"),je=Symbol.for("vuetify:data-table-sort");function ea(e){const t=F(()=>e.initialSortOrder),a=j(e,"sortBy"),l=F(()=>e.mustSort),n=F(()=>e.multiSort);return{initialSortOrder:t,sortBy:a,multiSort:n,mustSort:l}}function ta(e,t){if(!ht(e))return{active:!!e};const{key:a,mode:l,modifier:n}=e,r=n==="alt"&&t?.altKey||n==="shift"&&t?.shiftKey;return{active:!a||t?.ctrlKey||t?.metaKey||!1,mode:r?l==="append"?"prepend":"append":l}}function aa(e){const{initialSortOrder:t,sortBy:a,mustSort:l,multiSort:n,page:r}=e,o=(u,f)=>{if(u.key==null)return;let m=a.value.map(g=>({...g}))??[];const d=m.find(g=>g.key===u.key),v=t.value,p=t.value==="desc"?"asc":"desc";if(d)d.order===p?l.value&&m.length===1?d.order=t.value:m=m.filter(g=>g.key!==u.key):d.order=p;else{const{active:g,mode:c}=ta(n.value,f);g?c==="prepend"?m.unshift({key:u.key,order:v}):m.push({key:u.key,order:v}):m=[{key:u.key,order:v}]}a.value=m,r&&(r.value=1)};function i(u){return!!a.value.find(f=>f.key===u.key)}const s={sortBy:a,toggleSort:o,isSorted:i};return z(je,s),s}function Ke(){const e=q(je);if(!e)throw new Error("Missing sort!");return e}function la(e,t,a,l){const n=re();return{sortedItems:I(()=>a.value.length?na(t.value,a.value,n.current.value,{transform:l?.transform,sortFunctions:{...e.customKeySort,...l?.sortFunctions?.value},sortRawFunctions:l?.sortRawFunctions?.value}):t.value)}}function na(e,t,a,l){const n=new Intl.Collator(a,{sensitivity:"accent",usage:"sort"});return e.map(o=>[o,l?.transform?l.transform(o):o]).sort((o,i)=>{for(let s=0;s<t.length;s++){let u=!1;const f=t[s].key,m=t[s].order??"asc";if(m===!1)continue;let d=le(o[1],f),v=le(i[1],f),p=o[0].raw,g=i[0].raw;if(m==="desc"&&([d,v]=[v,d],[p,g]=[g,p]),l?.sortRawFunctions?.[f]){const c=l.sortRawFunctions[f](p,g);if(c==null)continue;if(u=!0,c)return c}if(l?.sortFunctions?.[f]){const c=l.sortFunctions[f](d,v);if(c==null)continue;if(u=!0,c)return c}if(!u&&(d instanceof Date&&v instanceof Date&&(d=d.getTime(),v=v.getTime()),[d,v]=[d,v].map(c=>c!=null?c.toString().toLocaleLowerCase():c),d!==v))return Z(d)&&Z(v)?0:Z(d)?-1:Z(v)?1:!isNaN(d)&&!isNaN(v)?Number(d)-Number(v):n.compare(d,v)}return 0}).map(o=>{let[i]=o;return i})}const We=V({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,initialSortOrder:String,sortAscIcon:{type:E,default:"$sortAsc"},sortDescIcon:{type:E,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...oe(),...ye(),...Ct()},"VDataTableHeaders"),Ie=G()({name:"VDataTableHeaders",props:We(),setup(e,t){let{slots:a}=t;const{t:l}=re(),{toggleSort:n,sortBy:r,isSorted:o}=Ke(),{someSelected:i,allSelected:s,selectAll:u,showSelectAll:f}=ue(),{columns:m,headers:d}=se(),{loaderClasses:v}=Tt(e);function p(w,h){if(!(e.sticky||e.fixedHeader)&&!w.fixed)return;const k=typeof w.fixed=="string"?w.fixed:w.fixed?"start":"none";return{position:"sticky",left:k==="start"?C(w.fixedOffset):void 0,right:k==="end"?C(w.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${h})`:void 0}}function g(w,h){w.key==="Enter"&&!e.disableSort&&n(h,w)}function c(w){const h=r.value.find(k=>k.key===w.key);return!h&&e.initialSortOrder==="asc"||h?.order==="asc"?e.sortAscIcon:e.sortDescIcon}const{backgroundColorClasses:D,backgroundColorStyles:y}=Vt(()=>e.color),{displayClasses:S,mobile:T}=he(e),P=I(()=>({headers:d.value,columns:m.value,toggleSort:n,isSorted:o,sortBy:r.value,someSelected:i.value,allSelected:s.value,selectAll:u,getSortIcon:c})),B=I(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},S.value,v.value]),$=w=>{let{column:h,x:k,y:O}=w;const ie=h.key==="data-table-select"||h.key==="data-table-expand",X=h.key==="data-table-group"&&h.width===0&&!h.title,de=N(e.headerProps??{},h.headerProps??{});return x(Q,N({tag:"th",align:h.align,class:[{"v-data-table__th--sortable":h.sortable&&!e.disableSort,"v-data-table__th--sorted":o(h),"v-data-table__th--fixed":h.fixed},...B.value],style:{width:C(h.width),minWidth:C(h.minWidth),maxWidth:C(h.maxWidth),...p(h,O)},colspan:h.colspan,rowspan:h.rowspan,fixed:h.fixed,nowrap:h.nowrap,lastFixed:h.lastFixed,firstFixedEnd:h.firstFixedEnd,noPadding:ie,empty:X,tabindex:h.sortable?0:void 0,onClick:h.sortable?R=>n(h,R):void 0,onKeydown:h.sortable?R=>g(R,h):void 0},de),{default:()=>{const R=`header.${h.key}`,L={column:h,selectAll:u,isSorted:o,toggleSort:n,sortBy:r.value,someSelected:i.value,allSelected:s.value,getSortIcon:c};return a[R]?a[R](L):X?"":h.key==="data-table-select"?a["header.data-table-select"]?.(L)??(f.value&&x(ne,{color:e.color,density:e.density,modelValue:s.value,indeterminate:i.value&&!s.value,"onUpdate:modelValue":u},null)):b("div",{class:"v-data-table-header__content"},[b("span",null,[h.title]),h.sortable&&!e.disableSort&&x(we,{key:"icon",class:"v-data-table-header__sort-icon",icon:c(h)},null),e.multiSort&&o(h)&&b("div",{key:"badge",class:J(["v-data-table-header__sort-badge",...D.value]),style:Ce(y.value)},[r.value.findIndex(U=>U.key===h.key)+1])])}})},A=()=>{const w=I(()=>m.value.filter(k=>k?.sortable&&!e.disableSort)),h=m.value.find(k=>k.key==="data-table-select");return x(Q,N({tag:"th",class:[...B.value],colspan:d.value.length+1},e.headerProps),{default:()=>[b("div",{class:"v-data-table-header__content"},[x(Be,{chips:!0,color:e.color,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:w.value,label:l("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>r.value=[]},{append:h?()=>x(ne,{color:e.color,density:"compact",modelValue:s.value,indeterminate:i.value&&!s.value,"onUpdate:modelValue":()=>u(!s.value)},null):void 0,chip:k=>x(Bt,{onClick:k.item.raw?.sortable?()=>n(k.item.raw):void 0,onMousedown:O=>{O.preventDefault(),O.stopPropagation()}},{default:()=>[k.item.title,x(we,{class:J(["v-data-table__td-sort-icon",o(k.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:c(k.item.raw),size:"small"},null)]})})])]})};W(()=>T.value?b("tr",null,[x(A,null,null)]):b(K,null,[a.headers?a.headers(P.value):d.value.map((w,h)=>b("tr",null,[w.map((k,O)=>x($,{column:k,x:O,y:h},null))])),e.loading&&b("tr",{class:"v-data-table-progress"},[b("th",{colspan:m.value.length},[x(Ft,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"||e.loading==="true"?e.color:e.loading,indeterminate:!0},{default:a.loader})])])]))}}),ra=V({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),qe=Symbol.for("vuetify:data-table-group");function oa(e){return{groupBy:j(e,"groupBy")}}function sa(e){const{disableSort:t,groupBy:a,sortBy:l}=e,n=M(new Set),r=I(()=>a.value.map(f=>({...f,order:f.order??!1})).concat(t?.value?[]:l.value));function o(f){return n.value.has(f.id)}function i(f){const m=new Set(n.value);o(f)?m.delete(f.id):m.add(f.id),n.value=m}function s(f){function m(d){const v=[];for(const p of d.items)"type"in p&&p.type==="group"?v.push(...m(p)):v.push(p);return[...new Set(v)]}return m({items:f})}const u={sortByWithGroups:r,toggleGroup:i,opened:n,groupBy:a,extractRows:s,isGroupOpen:o};return z(qe,u),u}function ze(){const e=q(qe);if(!e)throw new Error("Missing group!");return e}function ua(e,t){if(!e.length)return[];const a=new Map;for(const l of e){const n=le(l.raw,t);a.has(n)||a.set(n,[]),a.get(n).push(l)}return a}function Ue(e,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const n=ua(e,t[0]),r=[],o=t.slice(1);return n.forEach((i,s)=>{const u=t[0],f=`${l}_${u}_${s}`;r.push({depth:a,id:f,key:u,value:s,items:o.length?Ue(i,o,a+1,f):i,type:"group"})}),r}function Je(e,t,a){const l=[];for(const n of e)"type"in n&&n.type==="group"?(n.value!=null&&l.push(n),(t.has(n.id)||n.value==null)&&(l.push(...Je(n.items,t,a)),a&&l.push({...n,type:"group-summary"}))):l.push(n);return l}function ia(e,t,a,l){return{flatItems:I(()=>{if(!t.value.length)return e.value;const r=Ue(e.value,t.value.map(o=>o.key));return Je(r,a.value,kt(l))})}}const Qe=V({item:{type:Object,required:!0},groupCollapseIcon:{type:E,default:"$tableGroupCollapse"},groupExpandIcon:{type:E,default:"$tableGroupExpand"},...oe()},"VDataTableGroupHeaderRow"),da=G()({name:"VDataTableGroupHeaderRow",props:Qe(),setup(e,t){let{slots:a}=t;const{isGroupOpen:l,toggleGroup:n,extractRows:r}=ze(),{isSelected:o,isSomeSelected:i,select:s}=ue(),{columns:u}=se(),f=I(()=>r([e.item])),m=F(()=>u.value.length-(u.value.some(d=>d.key==="data-table-select")?1:0));return()=>b("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[u.value.map(d=>{if(d.key==="data-table-group"){const v=l(e.item)?e.groupCollapseIcon:e.groupExpandIcon,p=()=>n(e.item);return a["data-table-group"]?.({item:e.item,count:f.value.length,props:{icon:v,onClick:p}})??x(Q,{class:"v-data-table-group-header-row__column",colspan:m.value},{default:()=>[x(Oe,{size:"small",variant:"text",icon:v,onClick:p},null),b("span",null,[e.item.value]),b("span",null,[Se("("),f.value.length,Se(")")])]})}else if(d.key==="data-table-select"){const v=f.value.filter(D=>D.selectable),p=v.length>0&&o(v),g=i(v)&&!p,c=D=>s(v,D);return a["data-table-select"]?.({props:{modelValue:p,indeterminate:g,"onUpdate:modelValue":c}})??x(Q,{class:"v-data-table__td--select-row",noPadding:!0},{default:()=>[x(ne,{density:e.density,disabled:v.length===0,modelValue:p,indeterminate:g,"onUpdate:modelValue":c},null)]})}return""})])}}),ca=V({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),Xe=Symbol.for("vuetify:datatable:expanded");function fa(e){const t=F(()=>e.expandOnClick),a=j(e,"expanded",e.expanded,i=>new Set(i),i=>[...i.values()]);function l(i,s){const u=new Set(a.value),f=te(i.value);if(s)u.add(f);else{const m=[...a.value].find(d=>te(d)===f);u.delete(m)}a.value=u}function n(i){const s=te(i.value);return[...a.value].some(u=>te(u)===s)}function r(i){l(i,!n(i))}const o={expand:l,expanded:a,expandOnClick:t,isExpanded:n,toggleExpand:r};return z(Xe,o),o}function Ye(){const e=q(Xe);if(!e)throw new Error("foo");return e}const Ze=V({color:String,index:Number,item:Object,cellProps:[Object,Function],collapseIcon:{type:E,default:"$collapse"},expandIcon:{type:E,default:"$expand"},onClick:fe(),onContextmenu:fe(),onDblclick:fe(),...oe(),...ye()},"VDataTableRow"),ga=G()({name:"VDataTableRow",props:Ze(),setup(e,t){let{slots:a}=t;const{displayClasses:l,mobile:n}=he(e,"v-data-table__tr"),{isSelected:r,toggleSelect:o,someSelected:i,allSelected:s,selectAll:u}=ue(),{isExpanded:f,toggleExpand:m}=Ye(),{toggleSort:d,sortBy:v,isSorted:p}=Ke(),{columns:g}=se();W(()=>b("tr",{class:J(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},l.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&g.value.map((c,D)=>{const y=e.item,S=`item.${c.key}`,T=`header.${c.key}`,P={index:e.index,item:y.raw,internalItem:y,value:le(y.columns,c.key),column:c,isSelected:r,toggleSelect:o,isExpanded:f,toggleExpand:m},B={column:c,selectAll:u,isSorted:p,toggleSort:d,sortBy:v.value,someSelected:i.value,allSelected:s.value,getSortIcon:()=>""},$=typeof e.cellProps=="function"?e.cellProps({index:P.index,item:P.item,internalItem:P.internalItem,value:P.value,column:c}):e.cellProps,A=typeof c.cellProps=="function"?c.cellProps({index:P.index,item:P.item,internalItem:P.internalItem,value:P.value}):c.cellProps,w=c.key==="data-table-select"||c.key==="data-table-expand",h=c.key==="data-table-group"&&c.width===0&&!c.title;return x(Q,N({align:c.align,indent:c.indent,class:{"v-data-table__td--expanded-row":c.key==="data-table-expand","v-data-table__td--select-row":c.key==="data-table-select"},fixed:c.fixed,fixedOffset:c.fixedOffset,fixedEndOffset:c.fixedEndOffset,lastFixed:c.lastFixed,firstFixedEnd:c.firstFixedEnd,maxWidth:n.value?void 0:c.maxWidth,noPadding:w,empty:h,nowrap:c.nowrap,width:n.value?void 0:c.width},$,A),{default:()=>{if(c.key==="data-table-select")return a["item.data-table-select"]?.({...P,props:{color:e.color,disabled:!y.selectable,modelValue:r([y]),onClick:ae(()=>o(y),["stop"])}})??x(ne,{color:e.color,disabled:!y.selectable,density:e.density,modelValue:r([y]),onClick:ae(O=>o(y,e.index,O),["stop"])},null);if(c.key==="data-table-expand")return a["item.data-table-expand"]?.({...P,props:{icon:f(y)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:ae(()=>m(y),["stop"])}})??x(Oe,{icon:f(y)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:ae(()=>m(y),["stop"])},null);if(a[S]&&!n.value)return a[S](P);const k=It(P.value);return n.value?b(K,null,[b("div",{class:"v-data-table__td-title"},[a[T]?.(B)??c.title]),b("div",{class:"v-data-table__td-value"},[a[S]?.(P)??k])]):k}})})]))}}),et=V({color:String,loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...ge(Ze(),["collapseIcon","expandIcon","density"]),...ge(Qe(),["groupCollapseIcon","groupExpandIcon","density"]),...ye()},"VDataTableRows"),De=G()({name:"VDataTableRows",inheritAttrs:!1,props:et(),setup(e,t){let{attrs:a,slots:l}=t;const{columns:n}=se(),{expandOnClick:r,toggleExpand:o,isExpanded:i}=Ye(),{isSelected:s,toggleSelect:u}=ue(),{toggleGroup:f,isGroupOpen:m}=ze(),{t:d}=re(),{mobile:v}=he(e);return W(()=>{const p=ge(e,["groupCollapseIcon","groupExpandIcon","density"]);return e.loading&&(!e.items.length||l.loading)?b("tr",{class:"v-data-table-rows-loading",key:"loading"},[b("td",{colspan:n.value.length},[l.loading?.()??d(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?b("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[b("td",{colspan:n.value.length},[l["no-data"]?.()??d(e.noDataText)])]):b(K,null,[e.items.map((g,c)=>{if(g.type==="group"){const S={index:c,item:g,columns:n.value,isExpanded:i,toggleExpand:o,isSelected:s,toggleSelect:u,toggleGroup:f,isGroupOpen:m};return l["group-header"]?l["group-header"](S):x(da,N({key:`group-header_${g.id}`,item:g},xe(a,":groupHeader",()=>S),p),l)}if(g.type==="group-summary"){const S={index:c,item:g,columns:n.value,toggleGroup:f};return l["group-summary"]?.(S)??""}const D={index:g.virtualIndex??c,item:g.raw,internalItem:g,columns:n.value,isExpanded:i,toggleExpand:o,isSelected:s,toggleSelect:u},y={...D,props:N({key:`item_${g.key??g.index}`,onClick:r.value?()=>{o(g)}:void 0,index:c,item:g,color:e.color,cellProps:e.cellProps,collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,density:e.density,mobile:v.value},xe(a,":row",()=>D),typeof e.rowProps=="function"?e.rowProps({item:D.item,index:D.index,internalItem:D.internalItem}):e.rowProps)};return b(K,{key:y.props.key},[l.item?l.item(y):x(ga,y.props,l),i(g)&&l["expanded-row"]?.(D)])})])}),{}}}),tt=V({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...pt(),...oe(),..._t(),...bt()},"VTable"),Te=G()({name:"VTable",props:tt(),setup(e,t){let{slots:a,emit:l}=t;const{themeClasses:n}=yt(e),{densityClasses:r}=Ot(e);return W(()=>x(e.tag,{class:J(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!a.top,"v-table--has-bottom":!!a.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},n.value,r.value,e.class]),style:Ce(e.style)},{default:()=>[a.top?.(),a.default?b("div",{class:"v-table__wrapper",style:{height:C(e.height)}},[b("table",null,[a.default()])]):a.wrapper?.(),a.bottom?.()]})),{}}}),va=V({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function ma(e,t,a,l){const n=e.returnObject?t:ee(t,e.itemValue),r=ee(t,e.itemSelectable,!0),o=l.reduce((i,s)=>(s.key!=null&&(i[s.key]=ee(t,s.value)),i),{});return{type:"item",key:e.returnObject?ee(t,e.itemValue):n,index:a,value:n,selectable:r,columns:o,raw:t}}function ha(e,t,a){return t.map((l,n)=>ma(e,l,n,a))}function ya(e,t){return{items:I(()=>ha(e,e.items,t.value))}}function ba(e){let{page:t,itemsPerPage:a,sortBy:l,groupBy:n,search:r}=e;const o=Ve("VDataTable"),i=()=>({page:t.value,itemsPerPage:a.value,sortBy:l.value,groupBy:n.value,search:r.value});let s=null;be(i,u=>{Fe(s,u)||(s&&s.search!==u.search&&(t.value=1),o.emit("update:options",u),s=u)},{deep:!0,immediate:!0})}const pa=V({...et(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...ca(),...ra(),...Mt(),...va(),...Xt(),...Zt(),...me(We(),["multiSort","initialSortOrder"]),...tt()},"DataTable"),xa=V({...Rt(),...pa(),...Nt(),...Ee()},"VDataTable"),Ia=G()({name:"VDataTable",props:xa(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:a,slots:l}=t;const{groupBy:n}=oa(e),{initialSortOrder:r,sortBy:o,multiSort:i,mustSort:s}=ea(e),{page:u,itemsPerPage:f}=Ht(e),{disableSort:m}=Dt(e),{columns:d,headers:v,sortFunctions:p,sortRawFunctions:g,filterFunctions:c}=Ut(e,{groupBy:n,showSelect:F(()=>e.showSelect),showExpand:F(()=>e.showExpand)}),{items:D}=ya(e,d),y=F(()=>e.search),{filteredItems:S}=Et(e,D,y,{transform:H=>H.columns,customKeyFilter:c}),{toggleSort:T}=aa({initialSortOrder:r,sortBy:o,multiSort:i,mustSort:s,page:u}),{sortByWithGroups:P,opened:B,extractRows:$,isGroupOpen:A,toggleGroup:w}=sa({groupBy:n,sortBy:o,disableSort:m}),{sortedItems:h}=la(e,S,P,{transform:H=>({...H.raw,...H.columns}),sortFunctions:p,sortRawFunctions:g}),{flatItems:k}=ia(h,n,B,()=>!!l["group-summary"]),O=I(()=>k.value.length),{startIndex:ie,stopIndex:X,pageCount:de,setItemsPerPage:R}=$t({page:u,itemsPerPage:f,itemsLength:O}),{paginatedItems:L}=Lt({items:k,startIndex:ie,stopIndex:X,itemsPerPage:f}),U=I(()=>$(L.value)),{isSelected:at,select:lt,selectAll:nt,toggleSelect:rt,someSelected:ot,allSelected:st}=Yt(e,{allItems:D,currentPage:U}),{isExpanded:ut,toggleExpand:it}=fa(e);ba({page:u,itemsPerPage:f,sortBy:o,groupBy:n,search:y}),xt({VDataTableRows:{hideNoData:F(()=>e.hideNoData),noDataText:F(()=>e.noDataText),loading:F(()=>e.loading),loadingText:F(()=>e.loadingText)}});const _=I(()=>({page:u.value,itemsPerPage:f.value,sortBy:o.value,pageCount:de.value,toggleSort:T,setItemsPerPage:R,someSelected:ot.value,allSelected:st.value,isSelected:at,select:lt,selectAll:nt,toggleSelect:rt,isExpanded:ut,toggleExpand:it,isGroupOpen:A,toggleGroup:w,items:U.value.map(H=>H.raw),internalItems:U.value,groupedItems:L.value,columns:d.value,headers:v.value}));return W(()=>{const H=ke.filterProps(e),dt=Ie.filterProps(me(e,["multiSort"])),ct=De.filterProps(e),ft=Te.filterProps(e);return x(Te,N({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},ft,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>l.top?.(_.value),default:()=>l.default?l.default(_.value):b(K,null,[l.colgroup?.(_.value),!e.hideDefaultHeader&&b("thead",{key:"thead"},[x(Ie,N(dt,{multiSort:!!e.multiSort}),l)]),l.thead?.(_.value),!e.hideDefaultBody&&b("tbody",null,[l["body.prepend"]?.(_.value),l.body?l.body(_.value):x(De,N(a,ct,{items:L.value}),l),l["body.append"]?.(_.value)]),l.tbody?.(_.value),l.tfoot?.(_.value)]),bottom:()=>l.bottom?l.bottom(_.value):!e.hideDefaultFooter&&b(K,null,[x(At,null,null),x(ke,H,{prepend:l["footer.prepend"]})])})}),{}}});export{Ia as V,ea as a,Ut as b,oa as c,sa as d,la as e,ia as f,Yt as g,fa as h,ba as i,Ie as j,De as k,Te as l,ra as m,pa as n,ga as o,aa as p,ya as u};
