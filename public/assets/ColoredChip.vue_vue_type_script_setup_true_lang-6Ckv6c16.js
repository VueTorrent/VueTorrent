import{z,o as x,s as H,at as N,K as U,E as P,au as A,av as I,aw as L,j as q,h as O,af as j,V as J,k as Q,l as W,n as Y,ax as G,H as X,r as Z,t as B,v as _,d as ee,ay as te,az as K,aA as ae}from"./index-CE7zU7rk.js";import{f as S,a6 as le,K as a,L as r,O as l,x as oe,R as b,P as h,U as y,V as C,n as o,u as w,F as $,_ as E,e as v,a7 as ne,a1 as F,a8 as se,Q as re,T as ue,S as ie,W as de,b as R,r as ce,Y as me,J as ye}from"./vue-DmdtsAaC.js";import{V as fe}from"./VForm-W5MZUusa.js";import{b as he}from"./vuetify-Ax4mEkq6.js";const ve={class:"d-flex"},ke={key:2},Ve={key:3},Ce=S({__name:"RightClickMenuEntry",props:{entryData:{}},setup(e){const t=e,i=I(L?"Meta":"Control",{initial:!1}),d=v(()=>"ontouchstart"in window||navigator.maxTouchPoints>0);function u(){t.entryData.action?.()}return(c,k)=>{const m=le("RightClickMenuEntry",!0);return e.entryData.hidden?y("",!0):(a(),r(z,{key:0,class:"px-3",disabled:e.entryData.disabled,onClick:u},{default:l(()=>[oe("div",ve,[e.entryData.disabled&&e.entryData.disabledIcon?(a(),r(x,{key:0,class:"mr-2"},{default:l(()=>[b(h(e.entryData.disabledIcon),1)]),_:1})):e.entryData.icon?(a(),r(x,{key:1,class:"mr-2"},{default:l(()=>[b(h(e.entryData.icon),1)]),_:1})):y("",!0),e.entryData.disabled&&e.entryData.disabledText?(a(),C("span",ke,h(e.entryData.disabledText),1)):(a(),C("span",Ve,h(e.entryData.text),1)),o(H),!e.entryData.disabled&&e.entryData.children?(a(),r(x,{key:4},{default:l(()=>[...k[0]||(k[0]=[b(" mdi-chevron-right ",-1)])]),_:1})):y("",!0)]),e.entryData.children?(a(),r(N,{key:0,activator:"parent","open-on-hover":!d.value,"open-on-click":"","close-on-content-click":!w(i),"close-delay":"10","open-delay":"0",location:"right"},{default:l(()=>[o(U,null,{default:l(()=>[e.entryData.slots?.top?(a(),C($,{key:0},[(a(!0),C($,null,E(e.entryData.slots.top,(s,V)=>(a(),r(m,{key:V,"entry-data":s},null,8,["entry-data"]))),128)),o(P,{thickness:"3"})],64)):y("",!0),o(A,{items:e.entryData.children,"item-height":"48",renderless:""},{default:l(({item:s})=>[o(m,{"entry-data":s},null,8,["entry-data"])]),_:1},8,["items"]),e.entryData.slots?.bottom?(a(),C($,{key:1},[o(P,{thickness:"3"}),(a(!0),C($,null,E(e.entryData.slots.bottom,(s,V)=>(a(),r(m,{key:V,"entry-data":s},null,8,["entry-data"]))),128))],64)):y("",!0)]),_:1})]),_:1},8,["open-on-hover","close-on-content-click"])):y("",!0)]),_:1},8,["disabled"]))}}}),we=S({__name:"RightClickMenu",props:se({menuData:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=ne(e,"modelValue"),i=I(L?"Meta":"Control",{initial:!1});return(d,u)=>t.value?(a(),r(N,{key:0,modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=c=>t.value=c),activator:"parent","close-on-content-click":!w(i),transition:"slide-y-transition",class:"text-noselect","scroll-strategy":"none"},{default:l(()=>[o(U,null,{default:l(()=>[F(d.$slots,"top"),d.$slots.top?(a(),r(P,{key:0,thickness:"3"})):y("",!0),o(A,{items:e.menuData,"item-height":"48",renderless:""},{default:l(({item:c})=>[o(Ce,{"entry-data":c},null,8,["entry-data"])]),_:1},8,["items"]),d.$slots.bottom?(a(),r(P,{key:1,thickness:"3"})):y("",!0),F(d.$slots,"bottom")]),_:3})]),_:3},8,["modelValue","close-on-content-click"])):y("",!0)}}),pe=S({__name:"MoveTorrentDialog",props:{guid:{},hashes:{},mode:{}},setup(e){const t=e,{isOpened:i}=q(t.guid),{t:d}=O(),u=j(),c=R(),k=R(),m=R(!1),s=ce({newPath:""}),V=[n=>!!n||d("dialogs.moveTorrent.required")],p=v(()=>t.hashes.map(u.getTorrentByHash)),D=v(()=>t.mode==="dl"?p.value[0]?.download_path:p.value[0]?.savePath);async function T(){await c.value?.validate(),m.value&&(await u.toggleAutoTmm(t.hashes,!1),await u.moveTorrents(t.mode,t.hashes,s.newPath),k.value?.saveValueToHistory(),M())}function M(){i.value=!1}return re(()=>{s.newPath=D.value||""}),(n,f)=>(a(),r(_,{modelValue:w(i),"onUpdate:modelValue":f[3]||(f[3]=g=>de(i)?i.value=g:null)},{default:l(()=>[o(J,null,{default:l(()=>[o(Q,null,{default:l(()=>[b(h(n.$t(`dialogs.moveTorrent.${e.mode}.title`)),1)]),_:1}),o(W,null,{default:l(()=>[o(w(fe),{ref_key:"form",ref:c,modelValue:m.value,"onUpdate:modelValue":f[1]||(f[1]=g=>m.value=g),onSubmit:f[2]||(f[2]=ue(()=>{},["prevent"]))},{default:l(()=>[D.value?(a(),r(Y,{key:0,"model-value":D.value,disabled:"",label:n.$t("dialogs.moveTorrent.oldPath")},null,8,["model-value","label"])):y("",!0),o(G,{ref_key:"field",ref:k,modelValue:s.newPath,"onUpdate:modelValue":f[0]||(f[0]=g=>s.newPath=g),"history-key":w(X).TORRENT_PATH,rules:V,autofocus:"",label:n.$t("dialogs.moveTorrent.newPath"),onKeydown:ie(T,["enter"])},null,8,["modelValue","history-key","label"])]),_:1},8,["modelValue"])]),_:1}),o(Z,null,{default:l(()=>[o(H),o(B,{color:"error",onClick:M},{default:l(()=>[b(h(n.$t("common.cancel")),1)]),_:1}),o(B,{color:"accent",disabled:!m.value,onClick:T},{default:l(()=>[b(h(n.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Me=S({__name:"ColoredChip",props:{defaultColor:{},disabled:{type:Boolean,default:!1},disabledValue:{},value:{}},setup(e){const t=e,{t:i}=O(),{current:d}=he(),u=ee(),{enableHashColors:c,hideColoredChip:k}=me(u);function m(n){return d.value.colors[n]??n}function s(n){return V.value?n.darken(30):n}const V=v(()=>u.theme.mode===ae.DARK&&u.theme.dark==="dark-oled"),p=v(()=>t.disabled||!c.value?t.defaultColor:K(t.value,s)),D=v(()=>t.disabled||!c.value?m(t.defaultColor):K(t.value,s)),T=v(()=>t.disabled?t.disabledValue||t.value||i("common.none"):t.value),M=v(()=>!k.value);return(n,f)=>M.value?(a(),r(te,{key:0,color:p.value,variant:"flat"},{default:l(()=>[b(h(T.value),1)]),_:1},8,["color"])):(a(),C("div",{key:1,class:"text-no-wrap",style:ye(`color: ${D.value}`)},h(T.value),5))}});export{we as _,pe as a,Me as b};
