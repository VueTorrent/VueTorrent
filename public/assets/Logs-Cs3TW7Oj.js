import{u as H,n as J,o as K,T as X,L as s,p as Y,q as f,k as R,r as A,s as m,t as Q,v as Z,w as c,V as ee,x as F,y as te,z as le,A as ae,j as se,B as ne,C as oe,D as ue}from"./index-B8nLjjzU.js";import{f as ie,U as re,V as de,e as T,b as me,M as ce,W as pe,S as C,J as i,m as e,L as t,x as g,O as r,u as n,I as v,R as y,T as V,F as B,X as fe,Y as E,N as U}from"./vue-Czkd09zR.js";import{u as ge}from"./vuetify-DhU_rFCJ.js";const ve={class:"pa-3"},ye={style:{"font-size":"1.6em !important"},class:"subtitle-1 ml-2"},Ve={class:"d-flex justify-end"},he={class:"d-flex mr-8 overflow-hidden"},ke={class:"d-flex"},we=ie({__name:"Logs",setup(Le){const O=re(),{t:P}=H(),{current:$}=ge(),h=J(),{filteredLogs:M,logTypeFilter:u,logMessageFilter:k,paginatedResults:j,currentPage:d,pageCount:p,reverseSort:L}=de(h),z=K(),D=T(()=>({light:{normal:"black",info:"blue",warning:"orange",critical:"red"},dark:{normal:"white",info:"deepskyblue",warning:"darkorange",critical:new X("darkred").lighten(12).toString()}})),_=me([{title:s[s.NORMAL],value:s.NORMAL},{title:s[s.INFO],value:s.INFO},{title:s[s.WARNING],value:s.WARNING},{title:s[s.CRITICAL],value:s.CRITICAL}]),w=T(()=>u.value.length>0),x=T(()=>u.value.length===_.value.length);function S(){O.push({name:"dashboard"})}function N(a){return`color: ${D.value[$.value.dark?"dark":"light"][s[a.type].toLowerCase()]}`}function W(a){return s[a.type]}function q(a){return ue(a.timestamp*1e3).format(z.dateFormat)}function G(){x.value?u.value=[]:u.value=_.value.map(a=>a.value)}function b(a){a.key==="Escape"&&S()}return ce(async()=>{document.addEventListener("keydown",b),await h.cleanAndFetchLogs(),Y(()=>void h.updateLogs(),15e3)}),pe(()=>{document.removeEventListener("keydown",b)}),(a,o)=>(i(),C("div",ve,[e(A,{"no-gutters":"",align:"center",justify:"center"},{default:t(()=>[e(f,null,{default:t(()=>[g("h1",ye,r(n(P)("logs.title")),1)]),_:1}),e(f,null,{default:t(()=>[g("div",Ve,[e(R,{icon:n(L)?"mdi-sort-descending":"mdi-sort-ascending",variant:"plain",onClick:o[0]||(o[0]=l=>L.value=!n(L))},null,8,["icon"]),e(R,{icon:"mdi-close",variant:"plain",onClick:S})])]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(m,null,{default:t(()=>[e(A,null,{default:t(()=>[e(f,{cols:"6"},{default:t(()=>[e(Q,{modelValue:n(u),"onUpdate:modelValue":o[1]||(o[1]=l=>V(u)?u.value=l:null),items:_.value,label:a.$t("logs.filters.type"),"hide-details":"",multiple:"",chips:""},{"prepend-item":t(()=>[e(m,{title:a.$t("common.selectAll"),onClick:G},{prepend:t(()=>[e(Z,{indeterminate:w.value&&!x.value,"model-value":w.value},null,8,["indeterminate","model-value"])]),_:1},8,["title"]),e(c)]),_:1},8,["modelValue","items","label"])]),_:1}),e(f,{cols:"6"},{default:t(()=>[e(ee,{modelValue:n(k),"onUpdate:modelValue":o[2]||(o[2]=l=>V(k)?k.value=l:null),label:a.$t("logs.filters.query"),"hide-details":"",clearable:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),e(c,{class:"my-3",thickness:"5"}),n(p)>1?(i(),v(m,{key:0},{default:t(()=>[e(F,{modelValue:n(d),"onUpdate:modelValue":o[3]||(o[3]=l=>V(d)?d.value=l:null),length:n(p),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):y("",!0),e(c),(i(!0),C(B,null,fe(n(j),(l,I)=>(i(),C(B,{key:I},[I>0?(i(),v(c,{key:0})):y("",!0),e(m,{class:"pa-0"},{default:t(()=>[e(te,{class:"p-0"},{default:t(()=>[e(le,{class:"pa-0"},{default:t(()=>[e(ae,{class:"text-no-wrap",style:E(N(l))},{default:t(()=>[g("div",he,"["+r(l.id)+"] "+r(l.message),1),e(se),g("div",ke,r(q(l)),1)]),_:2},1032,["style"]),e(ne,{class:"wrap-word text-select",style:E(N(l))},{default:t(()=>[U(" ["+r(W(l))+"] "+r(l.message),1)]),_:2},1032,["style"])]),_:2},1024)]),_:2},1024)]),_:2},1024)],64))),128)),n(M).length===0?(i(),v(m,{key:1},{default:t(()=>[U(r(a.$t("logs.emptyLogList")),1)]),_:1})):y("",!0),e(c),n(p)>1?(i(),v(m,{key:2},{default:t(()=>[e(F,{modelValue:n(d),"onUpdate:modelValue":o[4]||(o[4]=l=>V(d)?d.value=l:null),length:n(p),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):y("",!0)]),_:1})]))}});export{we as default};
