import{h as $,x as q,d as H,L as s,y as Q,s as R,t as F,z as m,A as X,B as A,C as Y,D as Z,E as p,n as ee,F as te,G as le,I as ae,J as se,K as ne,M as oe,T as ie}from"./index-ClS_ZUxz.js";import{f as re,X as ue,Y as de,b as me,Q as ce,Z as pe,K as r,V as x,x as f,P as u,u as t,n as e,O as a,W as v,L as y,U as V,F as E,_ as fe,J as B,R as P,e as T}from"./vue-DmdtsAaC.js";import{V as U}from"./VPagination-B9hxAEuX.js";import{b as ge}from"./vuetify-Ax4mEkq6.js";const ve={class:"pa-3"},ye={class:"d-flex align-center"},Ve={class:"text-h5 ml-2"},he={class:"d-flex justify-end"},_e={class:"d-flex mr-8 overflow-hidden"},ke={class:"d-flex"},Se=re({__name:"Logs",setup(Le){const O=ue(),{t:c}=$(),{current:M}=ge(),h=q(),{filteredLogs:D,logTypeFilter:i,logMessageFilter:_,paginatedResults:G,currentPage:d,pageCount:g,reverseSort:k}=de(h),K=H(),W=T(()=>({light:{normal:"black",info:"blue",warning:"orange",critical:"red"},dark:{normal:"white",info:"deepskyblue",warning:"darkorange",critical:new ie("darkred").lighten(12).toString()}})),L=me([{title:s[s.NORMAL],value:s.NORMAL},{title:s[s.INFO],value:s.INFO},{title:s[s.WARNING],value:s.WARNING},{title:s[s.CRITICAL],value:s.CRITICAL}]),C=T(()=>i.value.length>0),w=T(()=>i.value.length===L.value.length);function S(){O.push({name:"dashboard"})}function b(n){return`color: ${W.value[M.value.dark?"dark":"light"][s[n.type].toLowerCase()]}`}function j(n){return s[n.type]}function z(n){return oe(n.timestamp*1e3).format(K.dateFormat)}function J(){w.value?i.value=[]:i.value=L.value.map(n=>n.value)}function N(n){n.key==="Escape"&&S()}return ce(async()=>{document.addEventListener("keydown",N),await h.cleanAndFetchLogs(),Q(()=>{h.updateLogs()},15e3)}),pe(()=>{document.removeEventListener("keydown",N)}),(n,o)=>(r(),x("div",ve,[f("div",ye,[f("div",Ve,u(t(c)("logs.title")),1),e(R),f("div",he,[e(F,{icon:t(k)?"mdi-sort-descending":"mdi-sort-ascending",variant:"plain",onClick:o[0]||(o[0]=l=>k.value=!t(k))},null,8,["icon"]),e(F,{icon:"mdi-close",variant:"plain",onClick:S})])]),e(ne,null,{default:a(()=>[e(m,null,{default:a(()=>[e(X,null,{default:a(()=>[e(A,{cols:"6"},{default:a(()=>[e(Y,{modelValue:t(i),"onUpdate:modelValue":o[1]||(o[1]=l=>v(i)?i.value=l:null),items:L.value,label:t(c)("logs.filters.type"),chips:"","hide-details":"",multiple:""},{"prepend-item":a(()=>[e(m,{title:t(c)("common.selectAll"),onClick:J},{prepend:a(()=>[e(Z,{indeterminate:C.value&&!w.value,"model-value":C.value},null,8,["indeterminate","model-value"])]),_:1},8,["title"]),e(p)]),_:1},8,["modelValue","items","label"])]),_:1}),e(A,{cols:"6"},{default:a(()=>[e(ee,{modelValue:t(_),"onUpdate:modelValue":o[2]||(o[2]=l=>v(_)?_.value=l:null),label:t(c)("logs.filters.query"),clearable:"","hide-details":""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),e(p,{class:"my-3",thickness:"5"}),t(g)>1?(r(),y(m,{key:0},{default:a(()=>[e(U,{modelValue:t(d),"onUpdate:modelValue":o[3]||(o[3]=l=>v(d)?d.value=l:null),length:t(g),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):V("",!0),e(p),(r(!0),x(E,null,fe(t(G),(l,I)=>(r(),x(E,{key:I},[I>0?(r(),y(p,{key:0})):V("",!0),e(m,{class:"pa-0"},{default:a(()=>[e(te,{class:"p-0"},{default:a(()=>[e(le,{class:"pa-0"},{default:a(()=>[e(ae,{class:"text-no-wrap",style:B(b(l))},{default:a(()=>[f("div",_e,"["+u(l.id)+"] "+u(l.message),1),e(R),f("div",ke,u(z(l)),1)]),_:2},1032,["style"]),e(se,{class:"wrap-word text-select",style:B(b(l))},{default:a(()=>[P(" ["+u(j(l))+"] "+u(l.message),1)]),_:2},1032,["style"])]),_:2},1024)]),_:2},1024)]),_:2},1024)],64))),128)),t(D).length===0?(r(),y(m,{key:1},{default:a(()=>[P(u(t(c)("logs.emptyLogList")),1)]),_:1})):V("",!0),e(p),t(g)>1?(r(),y(m,{key:2},{default:a(()=>[e(U,{modelValue:t(d),"onUpdate:modelValue":o[4]||(o[4]=l=>v(d)?d.value=l:null),length:t(g),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):V("",!0)]),_:1})]))}});export{Se as default};
