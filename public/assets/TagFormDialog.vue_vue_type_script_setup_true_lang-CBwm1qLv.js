import{f as P,b as g,r as X,M as D,I as C,J as f,L as t,m as l,N as s,O as r,u as b,P as F,Q as c,R as T,S as B,T as K}from"./vue-DYe3GjIu.js";import{u as R,b as z,c as E,d as I,e as M,f as O,g as q,V as p,h as j,a as A,i as J,j as L,k as $,l as Q,m as G}from"./index-BQJBRxbR.js";const H={key:0,class:"text-warning"},h=P({__name:"CategoryFormDialog",props:{guid:{},initialCategory:{}},emits:["submit"],setup(w,{emit:k}){const i=w,S=k,{t:m}=R(),v=z(),{isOpened:d}=E(i.guid),U=g(),u=g(!1),N=[e=>!!e||m("dialogs.category.nameRequired")],o=X({name:"",savePath:""});async function y(){u.value&&(i.initialCategory?await v.editCategory(o,i.initialCategory.name===o.name?void 0:i.initialCategory.name):await v.createCategory(o),S("submit",o),V())}const V=()=>{d.value=!1};return D(()=>{o.name=i.initialCategory?.name||"",o.savePath=i.initialCategory?.savePath||""}),(e,a)=>(f(),C(Q,{modelValue:b(d),"onUpdate:modelValue":a[4]||(a[4]=n=>K(d)?d.value=n:null)},{default:t(()=>[l(I,null,{default:t(()=>[l(M,null,{default:t(()=>[s(r(e.$t(`dialogs.category.title.${e.initialCategory?"edit":"create"}`)),1)]),_:1}),l(O,null,{default:t(()=>[l(b(q),{modelValue:u.value,"onUpdate:modelValue":a[2]||(a[2]=n=>u.value=n),ref_key:"form",ref:U,onSubmit:a[3]||(a[3]=c(()=>{},["prevent"])),onKeydown:F(c(y,["prevent"]),["enter"])},{default:t(()=>[e.initialCategory?(f(),C(p,{key:0,"model-value":e.initialCategory.name,disabled:"",label:e.$t("dialogs.category.oldName")},null,8,["model-value","label"])):T("",!0),l(p,{modelValue:o.name,"onUpdate:modelValue":a[0]||(a[0]=n=>o.name=n),rules:N,autofocus:!e.initialCategory,label:e.$t("dialogs.category.name")},null,8,["modelValue","autofocus","label"]),l(p,{modelValue:o.savePath,"onUpdate:modelValue":a[1]||(a[1]=n=>o.savePath=n),autofocus:!!e.initialCategory,label:e.$t("dialogs.category.savePath")},null,8,["modelValue","autofocus","label"]),l(j,null,{default:t(()=>[e.initialCategory&&e.initialCategory.name!==o.name?(f(),B("div",H,[l(A,null,{default:t(()=>a[5]||(a[5]=[s("mdi-alert")])),_:1,__:[5]}),s(" "+r(e.$t("dialogs.category.warnEdit")),1)])):T("",!0)]),_:1})]),_:1},8,["modelValue","onKeydown"])]),_:1}),l(J,null,{default:t(()=>[l(L),l($,{color:"error",onClick:V},{default:t(()=>[s(r(e.$t("common.cancel")),1)]),_:1}),l($,{color:"accent",disabled:!u.value,onClick:y},{default:t(()=>[s(r(e.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),W={key:0,class:"text-warning"},_=P({__name:"TagFormDialog",props:{guid:{},initialTag:{}},emits:["submit"],setup(w,{emit:k}){const i=w,S=k,{isOpened:m}=E(i.guid),{t:v}=R(),d=G(),U=g(),u=g(!1),N=g([e=>!!e||v("dialogs.tag.required"),e=>!i.initialTag||!!i.initialTag&&!e.includes(",")||v("dialogs.tag.comma")]),o=g("");async function y(){if(!u.value)return;let e;i.initialTag?(e=[o.value],await d.editTag(i.initialTag,o.value)):(e=o.value.split(","),await d.createTags(e)),S("submit",e),V()}const V=()=>{m.value=!1};return D(()=>{o.value=i.initialTag||""}),(e,a)=>(f(),C(Q,{modelValue:b(m),"onUpdate:modelValue":a[3]||(a[3]=n=>K(m)?m.value=n:null)},{default:t(()=>[l(I,null,{default:t(()=>[l(M,null,{default:t(()=>[s(r(e.$t(`dialogs.tag.title.${e.initialTag?"rename":"create"}`)),1)]),_:1}),l(O,null,{default:t(()=>[l(b(q),{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=n=>u.value=n),ref_key:"form",ref:U,onSubmit:a[2]||(a[2]=c(()=>{},["prevent"])),onKeydown:F(c(y,["prevent"]),["enter"])},{default:t(()=>[e.initialTag?(f(),C(p,{key:0,"model-value":e.initialTag,disabled:"",label:e.$t("dialogs.tag.oldName")},null,8,["model-value","label"])):T("",!0),l(p,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=n=>o.value=n),rules:N.value,autofocus:"",hint:e.$t("dialogs.tag.hint"),label:e.$t("dialogs.tag.name")},null,8,["modelValue","rules","hint","label"]),l(j,null,{default:t(()=>[e.initialTag&&e.initialTag!==o.value?(f(),B("div",W,[l(A,null,{default:t(()=>a[4]||(a[4]=[s("mdi-alert")])),_:1,__:[4]}),s(" "+r(e.$t("dialogs.tag.warnEdit")),1)])):T("",!0)]),_:1})]),_:1},8,["modelValue","onKeydown"])]),_:1}),l(J,null,{default:t(()=>[l(L),l($,{color:"error",onClick:V},{default:t(()=>[s(r(e.$t("common.cancel")),1)]),_:1}),l($,{color:"accent",disabled:!u.value,onClick:y},{default:t(()=>[s(r(e.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});export{_,h as a};
