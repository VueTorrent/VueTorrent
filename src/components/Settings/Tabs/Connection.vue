<template>
  <v-card flat>
    <v-col cols="5" class="pb-0 mt-2">
      <v-select v-model="settings.bittorrent_protocol" outlined dense small-chips :items="bittorrent_protocol" :label="$t('modals.settings.pageConnection.protocol')" />
    </v-col>
    <v-subheader>
      {{ $t('modals.settings.pageConnection.listeningSubHeader') }}
    </v-subheader>
    <v-list-item>
      <v-text-field v-model="settings.listen_port" class="mb-2" outlined dense type="number" hide-details :label="$t('modals.settings.pageConnection.incomingConnectionPort')" />
    </v-list-item>
    <v-list-item>
      <v-checkbox v-model="settings.upnp" hide-details class="ma-0 pa-0" :label="$t('modals.settings.pageConnection.useUPnP')" />
    </v-list-item>
    <v-subheader>
      {{ $t('modals.settings.pageConnection.subHeader') }}
    </v-subheader>
    <v-list-item>
      <v-text-field v-model="settings.max_connec" class="mb-2" outlined dense type="number" hide-details :label="$t('modals.settings.pageConnection.globalMaxConnection')" />
    </v-list-item>
    <v-list-item>
      <v-text-field
        v-model="settings.max_connec_per_torrent"
        class="mb-2"
        outlined
        dense
        type="number"
        hide-details
        :label="$t('modals.settings.pageConnection.perTorrentMaxConnection')"
      />
    </v-list-item>
    <v-list-item>
      <v-text-field v-model="settings.max_uploads" class="mb-2" outlined dense type="number" hide-details :label="$t('modals.settings.pageConnection.globalMaxUploadSlots')" />
    </v-list-item>
    <v-list-item>
      <v-text-field
        v-model="settings.max_uploads_per_torrent"
        class="mb-2"
        outlined
        dense
        type="number"
        hide-details
        :label="$t('modals.settings.pageConnection.perTorrentMaxUploadSlots')"
      />
    </v-list-item>
    <v-divider />
    <v-subheader>
      {{ $t('modals.settings.pageConnection.proxySubHeader') }}
    </v-subheader>
    <v-list-item>
      <v-row class="ml-5 mr-5 pb-4">
        <v-col cols="5" class="pa-0 pr-2">
          <v-select v-model="settings.proxy_type" outlined dense hide-details small-chips :items="proxyTypes" />
        </v-col>
        <v-col cols="4" class="pa-0">
          <v-text-field v-model="settings.proxy_ip" class="mr-1" outlined dense hide-details :label="$t('modals.settings.pageWebUI.ipAddress')" />
        </v-col>
        <v-col cols="3" class="pa-0">
          <v-text-field v-model="settings.proxy_port" class="ml-1" outlined dense type="number" hide-details :label="$t('modals.settings.pageWebUI.port')" />
        </v-col>
      </v-row>
    </v-list-item>
    <v-list-item>
      <v-checkbox v-model="settings.proxy_peer_connections" hide-details class="ma-0 pa-0" :label="$t('modals.settings.pageConnection.proxyPeerConnections')" />
    </v-list-item>
    <v-list-item>
      <v-checkbox v-model="settings.proxy_torrents_only" hide-details class="ma-0 pa-0" :label="$t('modals.settings.pageConnection.proxyTorrentOnly')" />
    </v-list-item>
    <v-divider />
    <v-list-item>
      <v-checkbox v-model="settings.proxy_auth_enabled" hide-details class="ma-0 pa-0" :label="$t('modals.settings.pageConnection.proxyAuth')" />
    </v-list-item>
    <v-list-item>
      <v-text-field
        v-model="settings.proxy_username"
        class="mb-2"
        outlined
        dense
        hide-details
        :disabled="!settings.proxy_auth_enabled"
        :label="$t('modals.settings.pageWebUI.username')"
      />
    </v-list-item>
    <v-list-item>
      <v-text-field
        v-model="settings.proxy_password"
        class="mb-2"
        outlined
        dense
        hide-details
        type="password"
        :disabled="!settings.proxy_auth_enabled"
        :label="$t('modals.settings.pageWebUI.password')"
      />
    </v-list-item>
  </v-card>
</template>

<script>
import { SettingsTab, FullScreenModal } from '@/mixins'
import { BitTorrentProtocol, ProxyType } from '@/enums/qbit/AppPreferences'

export default {
  name: 'Connection',
  mixins: [SettingsTab, FullScreenModal],
  data() {
    return {
      proxyTypes: [
        {
          value: ProxyType.DISABLED,
          text: 'None'
        },
        {
          value: ProxyType.HTTP_WITHOUT_AUTH,
          text: 'HTTP proxy without authentication'
        },
        {
          value: ProxyType.SOCKS5_WITHOUT_AUTH,
          text: 'SOCKS5 proxy without authentication'
        },
        {
          value: ProxyType.HTTP_WITH_AUTH,
          text: 'HTTP proxy with authentication'
        },
        {
          value: ProxyType.SOCKS5_WITH_AUTH,
          text: 'SOCKS5 proxy with authentication'
        },
        {
          value: ProxyType.SOCKS4_WITHOUT_AUTH,
          text: 'SOCKS4 proxy without authentication'
        }
      ],
      bittorrent_protocol: [
        { value: BitTorrentProtocol.TCP_uTP, text: 'TCP and μTP' },
        { value: BitTorrentProtocol.TCP, text: 'TCP' },
        { value: BitTorrentProtocol.uTP, text: 'μTP' }
      ]
    }
  }
}
</script>
